# 第十三步：配置定时触发器 - 操作指南

## 📋 任务说明

为 `taskCheck` 云函数配置定时触发器，让它每分钟自动执行一次，检查视频处理任务状态。

---

## 🎯 快速操作链接

### 直接访问 taskCheck 函数：

点击以下链接直接打开 taskCheck 函数配置页面：

```
https://console.cloud.tencent.com/tcb/scf/index?envId=yang0313-7g4dqwd46c63d876&rid=4&functionName=taskCheck
```

---

## 🚀 三种配置方法（任选其一）

### 方法一：触发管理页面（最简单）✅

1. 打开上面的链接
2. 点击顶部「**触发管理**」标签
3. 点击「**创建触发器**」
4. 选择「**定时触发**」
5. Cron 表达式填写：`0 */1 * * * * *`
6. 启用：是
7. 提交

---

### 方法二：函数配置页面（JSON 方式）

1. 打开上面的链接
2. 找到「**定时触发器**」字段
3. 点击「**编辑**」
4. 粘贴以下内容：

```json
[{"name":"timer","type":"timer","config":"0 */1 * * * * *"}]
```

5. 保存

---

### 方法三：命令行交互式配置

在 PowerShell 中执行：

```powershell
cd cloud-functions
tcb fn trigger create taskCheck --envId yang0313-7g4dqwd46c63d876
```

然后按照提示：
- 触发器类型：选择 `timer`
- Cron 表达式：输入 `0 */1 * * * * *`
- 确认创建

---

## ✅ 验证配置

### 检查方式 1：查看触发器列表

1. 在函数详情页，查看「触发管理」或「触发器」
2. 应该能看到一个定时触发器
3. 状态为「已启用」

### 检查方式 2：查看日志

1. 等待 1-2 分钟
2. 点击「日志查询」标签
3. 应该能看到定时执行的日志记录

---

## 📝 配置参数说明

| 参数 | 值 | 说明 |
|------|-----|------|
| 触发器类型 | timer | 定时触发 |
| Cron 表达式 | `0 */1 * * * * *` | 每分钟执行一次 |
| 状态 | 启用 | 立即生效 |

**Cron 表达式解释：**
```
0 */1 * * * * *
↑  ↑  表示每分钟
↑ 表示在第0秒执行

结果：每分钟的第0秒执行一次
```

---

## 💡 可选配置

### 同时配置 HTTP 访问（方便测试）

taskCheck 函数也可以配置 HTTP 访问服务：

1. 在函数配置页面，找到「HTTP 访问服务路径」
2. 点击「去设定」
3. 配置：
   - 路径：`/api/taskCheck`
   - 身份认证：关闭
   - 路径透传：开启

这样可以手动访问 URL 来触发函数执行（用于测试）。

---

## ⏭️ 下一步

配置完成后，进入：

**第十四步：测试 API 接口**

---

## 🆘 遇到问题？

如果配置过程中遇到任何问题，请：

1. 截图当前页面
2. 告诉我看到了什么
3. 我会继续协助您

---

**更新时间**: 2025年1月
**状态**: ✅ 配置指南已就绪，等待手动操作

