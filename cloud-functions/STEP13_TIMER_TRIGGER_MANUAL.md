# 第十三步：配置定时触发器（手动操作指南）

## ⚠️ 重要提示

由于 CloudBase CLI 的触发器命令是交互式的，无法通过脚本自动配置。请按照以下步骤在控制台手动配置。

---

## 🚀 操作步骤

### 方法一：通过控制台界面配置（推荐）

#### 步骤 1：访问云函数控制台

打开浏览器，访问：
```
https://console.cloud.tencent.com/tcb/scf/index?envId=yang0313-7g4dqwd46c63d876&rid=4&functionName=taskCheck
```

这个链接会直接打开 taskCheck 函数的详情页。

#### 步骤 2：进入触发管理

1. 在函数详情页，查找顶部标签栏
2. 点击「**触发管理**」标签
3. 如果没有看到标签，尝试在页面中找到「触发器」或「Trigger」相关选项

#### 步骤 3：创建定时触发器

1. 点击「**创建触发器**」或「**添加触发器**」按钮
2. 在弹出的配置面板中填写：

| 配置项 | 填写内容 |
|--------|----------|
| **触发方式** | 定时触发 / Timer |
| **触发器名称** | timer（或任意名称）|
| **Cron 表达式** | `0 */1 * * * * *` |
| **启用** | 是 / 启用 |

3. 点击「**提交**」或「**确定**」

---

### 方法二：通过函数配置页面

如果找不到「触发管理」标签，可以在函数配置页面配置：

#### 步骤 1：进入函数配置

1. 访问：https://console.cloud.tencent.com/tcb/scf/index?envId=yang0313-7g4dqwd46c63d876&rid=4&functionName=taskCheck
2. 确保在「函数配置」或「基本信息」页面

#### 步骤 2：配置定时触发器

1. 找到「**定时触发器**」字段
2. 点击「**编辑**」或「**配置**」
3. 输入以下 JSON 配置：

```json
[
  {
    "name": "timer",
    "type": "timer",
    "config": "0 */1 * * * * *"
  }
]
```

4. 点击「**保存**」

---

### 方法三：通过 HTTP 访问服务（可选）

taskCheck 函数也可以配置 HTTP 访问服务，方便手动触发测试：

1. 在函数配置页面，找到「**HTTP 访问服务路径**」
2. 点击「**去设定**」
3. 配置：
   - 触发路径：`/api/taskCheck`
   - 身份认证：关闭
   - 路径透传：开启
4. 点击「**确定**」

---

## ✅ 验证配置

### 检查清单

完成后，确认：

- [ ] 定时触发器已创建
- [ ] Cron 表达式为 `0 */1 * * * * *`
- [ ] 触发器状态为「已启用」或「启用」

### 查看执行日志

1. 等待 1-2 分钟
2. 在函数详情页，点击「**日志查询**」标签
3. 查看是否有定时执行的日志记录

---

## 📝 Cron 表达式说明

```
0 */1 * * * * *
│  │  │ │ │ │ │
│  │  │ │ │ │ └─ 年（可选）
│  │  │ │ │ └─── 星期（0-7）
│  │  │ │ └───── 月（1-12）
│  │  │ └─────── 日（1-31）
│  └─────────── 时（0-23）
│  └───────────── 分（0-59）
└─────────────── 秒（0-59）
```

**常用表达式：**
- `0 */1 * * * * *` - 每分钟执行一次 ✅ 推荐
- `0 */5 * * * * *` - 每5分钟执行一次
- `0 0 */1 * * * *` - 每小时执行一次

---

## 💡 常见问题

### Q1：找不到「触发管理」标签？

A：不同版本的控制台界面可能不同，尝试：
- 查找「触发器」、「Trigger」等相关选项
- 或在函数配置页面直接配置

### Q2：JSON 配置报错？

A：确保：
- 使用英文标点符号
- Cron 表达式用引号包裹
- JSON 格式正确

### Q3：配置后没有执行？

A：检查：
- 触发器状态是否为「已启用」
- 等待至少1分钟
- 查看函数日志

---

## 🆘 需要帮助？

如果配置过程中遇到问题：

1. 截图当前页面
2. 告诉我看到了什么选项
3. 我会继续指导您

---

**配置完成后，进入下一步：测试 API 接口**

